<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classroom Attendance Tracker</title>
    <!-- Load Tailwind CSS from CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Lucide icons for UI elements -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Configure Tailwind to use the 'class' strategy for dark mode */
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        'primary-500': '#4f46e5',
                        'dark-bg': '#111827',
                        'dark-card': '#1f2937',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
        /* Custom styles for the responsive table layout */
        .status-button {
            transition: all 0.2s ease-in-out;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-dark-bg min-h-screen text-gray-900 dark:text-gray-100 font-sans p-4 sm:p-6 lg:p-8 transition-colors duration-300">

    <div class="max-w-6xl mx-auto">
        
        <!-- Header and Controls -->
        <header class="flex justify-between items-center mb-8 p-4 bg-white dark:bg-dark-card rounded-xl shadow-lg">
            <h1 class="text-3xl font-extrabold text-primary-500 tracking-tight">
                Attendance Log
            </h1>
            <div class="flex items-center space-x-4">
                <span id="date-display" class="font-medium text-sm sm:text-base text-gray-500 dark:text-gray-400">
                    <!-- Date will be set by JS -->
                </span>
                <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500 transition-colors duration-200" aria-label="Toggle Dark Mode">
                    <i data-lucide="sun" id="sun-icon" class="w-6 h-6 hidden"></i>
                    <i data-lucide="moon" id="moon-icon" class="w-6 h-6 hidden"></i>
                </button>
            </div>
        </header>

        <!-- Attendance Summary Card -->
        <div id="summary-card" class="mb-8 p-6 bg-white dark:bg-dark-card rounded-xl shadow-lg border border-gray-100 dark:border-gray-700">
            <h2 class="text-xl font-semibold mb-3">Today's Snapshot</h2>
            <div class="flex flex-col sm:flex-row gap-4">
                <div class="flex-1 p-3 rounded-lg bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-800 text-green-700 dark:text-green-300">
                    <p class="text-sm">Present</p>
                    <p id="present-count" class="text-2xl font-bold">0</p>
                </div>
                <div class="flex-1 p-3 rounded-lg bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-300">
                    <p class="text-sm">Absent</p>
                    <p id="absent-count" class="text-2xl font-bold">0</p>
                </div>
                <div class="flex-1 p-3 rounded-lg bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 text-blue-700 dark:text-blue-300">
                    <p class="text-sm">Total Students</p>
                    <p id="total-count" class="text-2xl font-bold">0</p>
                </div>
            </div>
        </div>

        <!-- Attendance List/Table -->
        <div class="bg-white dark:bg-dark-card p-4 sm:p-6 rounded-xl shadow-lg overflow-x-auto">
            <div class="hidden lg:grid lg:grid-cols-[100px_1fr_150px] gap-4 py-2 mb-2 font-semibold text-gray-500 dark:text-gray-400 border-b dark:border-gray-700">
                <span>ID</span>
                <span>Student Name</span>
                <span class="text-center">Status</span>
            </div>
            
            <!-- Student List Container -->
            <div id="attendance-list" class="space-y-4 lg:space-y-0">
                <!-- Students will be rendered here by JS -->
            </div>
        </div>

    </div>

    <script>
        // Data structure for the attendance tracker
        let students = [
            { id: 1, name: "Aarav Sharma", present: true },
            { id: 2, name: "Neha Verma", present: true },
            { id: 3, name: "Rohan Patel", present: false },
            { id: 4, name: "Priya Singh", present: true },
            { id: 5, name: "Vikram Yadav", present: false },
            { id: 6, name: "Anjali Gupta", present: true },
            { id: 7, name: "Suresh Menon", present: true },
            { id: 8, name: "Kavita Rao", present: false },
            { id: 9, name: "Rajesh Kumar", present: true },
        ];

        // --- Core Application Logic ---

        function renderAttendanceList() {
            const listContainer = document.getElementById('attendance-list');
            listContainer.innerHTML = '';
            
            students.forEach(student => {
                const isPresent = student.present;

                // Determine classes for button based on status
                const presentClass = 'bg-green-500 hover:bg-green-600 text-white';
                const absentClass = 'bg-red-500 hover:bg-red-600 text-white';

                const statusText = isPresent ? 'Present' : 'Absent';
                const statusColor = isPresent ? 'text-green-500 dark:text-green-400 font-medium' : 'text-red-500 dark:text-red-400 font-medium';
                
                const buttonClasses = isPresent ? presentClass : absentClass;
                const buttonText = isPresent ? 'Mark Absent' : 'Mark Present';

                // Responsive layout: Grid on large screens, Card-like block on small screens
                const itemHtml = `
                    <div id="student-${student.id}" class="student-item bg-gray-50 dark:bg-gray-800/30 p-4 rounded-lg shadow-sm lg:grid lg:grid-cols-[100px_1fr_150px] lg:gap-4 lg:items-center hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200 border-b lg:border-none border-gray-200 dark:border-gray-700">
                        
                        <!-- Student ID (Visible on all screen sizes) -->
                        <div class="text-sm font-mono text-gray-500 dark:text-gray-400 mb-1 lg:mb-0">#${student.id.toString().padStart(3, '0')}</div>
                        
                        <!-- Student Name -->
                        <div class="text-lg font-semibold lg:text-base">${student.name}</div>
                        
                        <!-- Status and Action Button Container (Responsive Styling) -->
                        <div class="flex items-center justify-between mt-2 lg:mt-0 lg:justify-center">
                            
                            <!-- Display Status on Mobile -->
                            <span class="${statusColor} lg:hidden text-sm">${statusText}</span>

                            <!-- Action Button -->
                            <button 
                                onclick="toggleAttendance(${student.id})" 
                                class="status-button ${buttonClasses} text-sm px-3 py-1 rounded-full whitespace-nowrap"
                            >
                                ${buttonText}
                            </button>
                        </div>
                    </div>
                `;
                listContainer.innerHTML += itemHtml;
            });
            updateSummary();
        }

        function toggleAttendance(id) {
            const studentIndex = students.findIndex(s => s.id === id);
            if (studentIndex > -1) {
                // Toggle the present status
                students[studentIndex].present = !students[studentIndex].present;
                // Re-render the list to reflect changes immediately
                renderAttendanceList();
            }
        }

        function updateSummary() {
            const presentCount = students.filter(s => s.present).length;
            const absentCount = students.filter(s => !s.present).length;
            const totalCount = students.length;

            document.getElementById('present-count').textContent = presentCount;
            document.getElementById('absent-count').textContent = absentCount;
            document.getElementById('total-count').textContent = totalCount;
        }
        
        // --- Theme / Dark Mode Logic ---

        function initTheme() {
            const storedTheme = localStorage.getItem('theme');
            const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const htmlElement = document.documentElement;

            // Set initial theme based on storage or system preference
            if (storedTheme === 'dark' || (!storedTheme && systemPrefersDark)) {
                htmlElement.classList.add('dark');
            } else {
                htmlElement.classList.remove('dark');
            }
            updateThemeIcons();
        }

        function toggleTheme() {
            const htmlElement = document.documentElement;
            const isDark = htmlElement.classList.contains('dark');
            
            if (isDark) {
                htmlElement.classList.remove('dark');
                localStorage.setItem('theme', 'light');
            } else {
                htmlElement.classList.add('dark');
                localStorage.setItem('theme', 'dark');
            }
            updateThemeIcons();
        }

        function updateThemeIcons() {
            const isDark = document.documentElement.classList.contains('dark');
            const sunIcon = document.getElementById('sun-icon');
            const moonIcon = document.getElementById('moon-icon');

            if (isDark) {
                sunIcon.classList.remove('hidden');
                moonIcon.classList.add('hidden');
            } else {
                sunIcon.classList.add('hidden');
                moonIcon.classList.remove('hidden');
            }
            // Re-render icons after DOM manipulation
            lucide.createIcons();
        }

        // --- Initialization ---

        window.onload = function() {
            // Initialize theme first to prevent FOUC (Flash of Unstyled Content)
            initTheme();
            
            // Set today's date
            const date = new Date();
            document.getElementById('date-display').textContent = date.toLocaleDateString('en-US', { 
                weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' 
            });

            // Initial render of the student list
            renderAttendanceList();

            // Setup event listener for theme toggle button
            document.getElementById('theme-toggle').addEventListener('click', toggleTheme);

            // Create initial Lucide icons
            lucide.createIcons();
        };

    </script>
</body>
</html>
